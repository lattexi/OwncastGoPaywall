# Stream Paywall Configuration
# Copy this file to .env and fill in the values

# ===================
# Server Configuration
# ===================
BASE_URL=http://localhost:3000
PORT=3000

# ===================
# Paytrail Configuration
# ===================
# Test credentials (for development)
PAYTRAIL_MERCHANT_ID=375917
PAYTRAIL_SECRET_KEY=SAIPPUAKAUPPIAS

# Production credentials (get from Paytrail dashboard)
# PAYTRAIL_MERCHANT_ID=your_merchant_id
# PAYTRAIL_SECRET_KEY=your_secret_key

# ===================
# Security
# ===================
# REQUIRED: Secret key for signing URLs and tokens (generate a random 32+ char string)
SIGNING_SECRET=change-this-to-a-random-secret-key-at-least-32-chars

# Session duration (how long access tokens are valid)
SESSION_DURATION=24h

# Heartbeat timeout (time before device is considered inactive)
HEARTBEAT_TIMEOUT=45s

# Signature validity (how long signed URLs are valid)
# Should match or exceed session duration since token validation provides actual security
SIGNATURE_VALIDITY=24h

# ===================
# Database
# ===================
DATABASE_URL=postgres://postgres:postgres@localhost:5432/paywall?sslmode=disable

# ===================
# Redis
# ===================
REDIS_URL=redis://localhost:6379

# ===================
# Admin API
# ===================
# REQUIRED: API key for admin API endpoints (generate a random string)
ADMIN_API_KEY=change-this-to-a-random-admin-key

# ===================
# Admin Web UI
# ===================
# Initial admin user credentials (created on first startup if no admins exist)
# Change the password after first login!
ADMIN_INITIAL_USER=admin
ADMIN_INITIAL_PASSWORD=changeme

# ===================
# Docker / SRS Container Management
# ===================
# Docker socket path
DOCKER_HOST=unix:///var/run/docker.sock

# Docker network name (must match docker-compose network)
DOCKER_NETWORK=owncastgopaywall_internal

# SRS Docker image
SRS_IMAGE=ossrs/srs:5

# SRS config directory (for containerized deployment, use the same path as the bind mount;
# e.g. /var/lib/stream-paywall/srs-configs so the Docker daemon can mount configs into SRS containers)
# SRS_CONFIG_DIR=/var/lib/stream-paywall/srs-configs

# Starting port for RTMP streams (each stream uses next available port)
RTMP_PORT_START=19350

# Public hostname for RTMP URLs (shown in admin panel for OBS configuration)
# Use your server's public IP or domain name in production
RTMP_PUBLIC_HOST=localhost

# SRS container resource limits (much lower than Owncast since SRS doesn't transcode)
# CPU limit in nanocpus (500000000 = 0.5 cores)
SRS_CPU_LIMIT=500000000
# Memory limit in MB
SRS_MEMORY_LIMIT=512

# ===================
# Environment
# ===================
# Set to "production" for JSON logging
ENV=development
